{"version":3,"sources":["webpack:///./src/api/comments.js","webpack:///src/views/comment/index.vue","webpack:///./src/views/comment/index.vue?c7ea","webpack:///./src/views/comment/index.vue"],"names":["__webpack_exports__","params","data","Request","url","API_CLOSECOMMENTS","method","API_ADMIRECOMMENT","target","API_CANCELADMIRECOMMENT","sticky","API_COMMENTS","__WEBPACK_IMPORTED_MODULE_0__utils_request__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__constants_api__","comment","name","commentData","commentPage","pageSize","currentPage","total","multipleSelection","created","this","pageChange","computed","methods","toggleSelection","rows","_this","forEach","row","$refs","multipleTable","toggleRowSelection","clearSelection","handleSelectionChange","val","getArticleList","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","Object","content","sent","stop","newPage","page","size","modifyComment","id","$router","push","path","$message","message","type","closeOrOpenComment","_this3","_callee2","_context2","comment_status","$confirm","confirmButtonText","cancelButtonText","comments","article_id","allow_comment","getComments","per_page","pageCount","views_comment","render","_vm","_h","$createElement","_c","_self","staticClass","ref","staticStyle","width","attrs","tooltip-effect","header-cell-style","backgroundColor","on","selection-change","label","prop","_v","align","scopedSlots","_u","key","fn","scope","_s","click","$event","layout","page-size","current-page","update:currentPage","$set","update:current-page","current-change","staticRenderFns","Component","normalizeComponent","ssrContext"],"mappings":"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","file":"static/js/12.355ad238aad731d4f4d0.js","sourcesContent":["import Request from '@/utils/request'\nimport { API_COMMENT_LIST, API_CLOSECOMMENTS, API_ADMIRECOMMENT, API_CANCELADMIRECOMMENT } from '@/constants/api'\n\n/** **获取评论列表*****/\nexport function getCommentList (data) {\n  return Request({\n    url: API_COMMENT_LIST,\n    method: 'post',\n    params: {},\n    data\n  })\n}\n/** *关闭或打开某个文章的评论  params 和data为不同类型参数*****/\nexport function closeOrOpenComment (params, data) {\n  return Request({\n    url: API_CLOSECOMMENTS,\n    method: 'put',\n    params,\n    data\n  })\n}\n// 对某个评论进行点赞\nexport function admireComment (data) {\n  return Request({\n    url: API_ADMIRECOMMENT,\n    method: 'post',\n    data\n  })\n}\n// 取消点赞\nexport function cancleAdmire (target) {\n  return Request({\n    url: API_CANCELADMIRECOMMENT + target,\n    method: 'delete'\n\n  })\n}\n// 修改置顶\nexport function changeTop (target, sticky) {\n  return Request({\n    url: `/comments/${target}/sticky`,\n    method: 'put',\n    data: { sticky }\n  })\n}\n// 添加回复内容\nexport function addComments (data) {\n  return Request({\n    url: API_COMMENTS,\n    method: 'post',\n    data\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/comments.js","<template>\n  <div class=\"comment-container\">\n    <el-table\n      ref=\"multipleTable\"\n      :data=\"commentData\"\n      tooltip-effect=\"dark\"\n      style=\"width: 100%\"\n      :header-cell-style=\"{backgroundColor:'#fbfbfb'}\"\n      @selection-change=\"handleSelectionChange\">\n      <el-table-column\n        label=\"标题\"\n        prop=\"title\"\n       >\n      </el-table-column>\n      <el-table-column\n        label=\"评论状态\"\n        prop=\"comment_status\"\n        align=\"center\"\n        width=\"120\">\n        <template slot-scope=\"scope\">{{ scope.row.comment_status ? '正常' : '关闭' }}</template>\n      </el-table-column>\n      <el-table-column\n        prop=\"total_comment_count\"\n        label=\"总评论数\"\n        align=\"center\"\n        width=\"120\"\n       >\n      </el-table-column>\n      <el-table-column\n        prop=\"fans_comment_count\"\n        label=\"粉丝评论数\"\n        align=\"center\"\n        width=\"120\"\n        >\n      </el-table-column>\n       <el-table-column\n      label=\"操作\"\n      width=\"300\">\n      <template slot-scope=\"scope\">\n        <el-button @click=\"modifyComment(scope.row)\" type=\"text\" size=\"small\">修改</el-button>\n        <el-button @click=\"closeOrOpenComment(scope.row)\" type=\"text\" size=\"small\">{{ scope.row.comment_status ? '关闭评论' : '打开评论'}}</el-button>\n      </template>\n    </el-table-column>\n    </el-table>\n    <div class=\"pagination\">\n      <el-pagination\n        layout=\"total, prev, pager, next, jumper\"\n        :page-size=\"commentPage.pageSize\"\n        :current-page.sync=\"commentPage.currentPage\"\n        :total=\"commentPage.total\"\n        @current-change=\"pageChange\"\n        >\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { closeOrOpenComment, getCommentList } from '@/api/comments'\nimport { searchArticle } from '@/api/content'\nexport default {\n  name: 'ContentManage',\n  data () {\n    return {\n      commentData: [],\n      commentPage: {\n        pageSize: 10, // 每页条数\n        currentPage: 1, // 当前页码\n        total: 0 // 总记录数\n      },\n      multipleSelection: []\n    }\n  },\n  created () {\n    // 初始化之后加载数据 文章页码数据为最初的数据\n    this.pageChange(1)\n  },\n  computed: {\n\n  },\n  methods: {\n    toggleSelection (rows) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row)\n        })\n      } else {\n        this.$refs.multipleTable.clearSelection()\n      }\n    },\n    handleSelectionChange (val) {\n      this.multipleSelection = val\n    },\n    async getArticleList (params) {\n      // 拉取评论\n      const result = await searchArticle(params)\n      this.commentPage.total = result.total\n      this.commentData = result.data\n    },\n    // 页码发生改变时触发\n    pageChange (newPage) {\n      this.commentPage.currentPage = newPage\n      this.getArticleList({ page: newPage, size: this.commentPage.pageSize })\n    },\n    // 修改评论\n    modifyComment (row) {\n      if (row.id) {\n        this.$router.push({ path: '/comment/detail?articleId=' + row.id })\n      } else {\n        this.$message({ message: '当前文章不可查看评论', type: 'warning' })\n      }\n    },\n    // 关闭或者打开评论\n    async  closeOrOpenComment (row) {\n      const message = !row.comment_status ? '此操作将开启评论，是否进行此操作?' : '关闭评论将清除所有评论，读者也不能再进行评论，是否进行此操作?'\n      const confirmResult = await this.$confirm(message, '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning' })\n      const result = await closeOrOpenComment({ article_id: row.id }, { allow_comment: !row.comment_status })\n      this.$message({ type: 'success', message: '操作成功' })\n      this.getComments({ page: this.commentPage.currentPage, per_page: this.commentPage.pageCount })\n    }\n  }\n}\n</script>\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.comment-container {\n  background-color: #ffffff;\n  border: 1px solid #e7e7e9;\n  .pagination {\n    margin: 50px 0;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/comment/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment-container\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.commentData,\"tooltip-effect\":\"dark\",\"header-cell-style\":{backgroundColor:'#fbfbfb'}},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"评论状态\",\"prop\":\"comment_status\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.comment_status ? '正常' : '关闭'))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"total_comment_count\",\"label\":\"总评论数\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fans_comment_count\",\"label\":\"粉丝评论数\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.modifyComment(scope.row)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.closeOrOpenComment(scope.row)}}},[_vm._v(_vm._s(scope.row.comment_status ? '关闭评论' : '打开评论'))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"layout\":\"total, prev, pager, next, jumper\",\"page-size\":_vm.commentPage.pageSize,\"current-page\":_vm.commentPage.currentPage,\"total\":_vm.commentPage.total},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.commentPage, \"currentPage\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.commentPage, \"currentPage\", $event)},\"current-change\":_vm.pageChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e9dd15b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/comment/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e9dd15b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e9dd15b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6e9dd15b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/comment/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}