{"version":3,"sources":["webpack:///./src/api/user.js","webpack:///src/views/user/index.vue","webpack:///./src/views/user/index.vue?c50f","webpack:///./src/views/user/index.vue"],"names":["updateUserProfile","data","Request","url","API_USERUPDATEPROFILE","method","user","name","emailData","phoneData","userData","editEmail","editPhone","editUser","showHeadUpload","showLocalImg","localImg","created","this","getUser","computed","headImg","photo","__webpack_require__","methods","fileChange","file","document","querySelector","files","URL","createObjectURL","showHead","$refs","myUpload","clearFiles","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","API_USERPROFILE","sent","stop","beginEdit","type","checkOtherClose","$message","message","email","phone","extends_default","cancelEdit","saveEdit","_this2","_callee2","_pattrn","_context2","match","test","uploadHead","_this3","_callee3","fd","_context3","length","FormData","append","API_HEAD","views_user","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","src","staticStyle","color","href","on","click","_e","_s","intro","$event","label-width","label","width","placeholder","model","value","callback","$$v","$set","expression","size","_m","id","visible","title","update:visible","alt","ref","on-change","auto-upload","limit","slot","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.5305fc04ffa2890acdec.js","sourcesContent":["import Request from '@/utils/request'\nimport { API_USERPROFILE, API_USERUPDATEPROFILE, API_HEAD } from '@/constants/api'\n\n// 获取用户个人信息\nexport function getUserProfile () {\n  return Request({\n    url: API_USERPROFILE,\n    method: 'get'\n  })\n}\n\n// 编辑用户信息\nexport function updateUserProfile (data) {\n  return Request({\n    url: API_USERUPDATEPROFILE,\n    method: 'post',\n    data\n  })\n}\n\n// 修改用户的头像\nexport function updateUserHead (data) {\n  return Request({\n    url: API_HEAD,\n    method: 'patch',\n    data\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/user.js","<template>\n  <div class=\"user-container\">\n    <header>账号信息</header>\n    <div class=\"wrap\">\n      <div class=\"form-item username\">\n        <label>\n          <div>\n            <img :src=\"headImg\" class=\"user-avatar\"/><br/>\n            <a @click=\"showHead\" style=\"color:#3296fa\" href=\"javascript:;\">更换头像</a>\n          </div>\n        </label>\n        <div v-if=\"!editUser\" class=\"rightContent\">\n          <dl>\n            <dt>{{user.name}}</dt>\n            <dd>{{user.intro}}</dd>\n          </dl>\n          <a style=\"color:#3296fa\" @click=\"beginEdit('user')\" href=\"javascript:;\">修改</a>\n        </div>\n        <div v-if=\"editUser\" class=\"clause edituser\">\n          <el-form>\n            <el-form-item label-width=\"120px\" label=\"名称\">\n              <el-input style='width:30%' placeholder=\"请输入头条号名称\" v-model=\"userData.name\"></el-input>\n            </el-form-item>\n            <el-form-item label-width=\"120px\" label=\"简介\">\n              <el-input style='width:30%' placeholder=\"请输入头条号简介\" v-model=\"userData.intro\"></el-input>\n            </el-form-item>\n          </el-form>\n          <div class=\"btn-group\">\n            <el-button @click=\"saveEdit('user')\" size=\"small\" type=\"primary\">保存</el-button>\n            <el-button @click=\"cancelEdit('user')\" size=\"small\">取消</el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-item userinfo\">\n        <label>账号信息</label>\n        <div class=\"rightContent\">\n          <div class=\"clause\">\n            <span>头条号类型</span>个人\n          </div>\n          <div class=\"clause\">\n            <span>头条号ID</span>{{user.id}}\n          </div>\n        </div>\n      </div>\n      <div class=\"form-item userinfo\">\n        <label>登录方式</label>\n        <div class=\"rightContent\">\n          <div v-if=\"!editPhone\" class=\"clause\">\n            <span>绑定手机</span>{{user.phone}}\n            <a href=\"javascript:;\" @click=\"beginEdit('phone')\">修改绑定手机</a>\n          </div>\n        </div>\n        <div v-if=\"editPhone\" class=\"clause\">\n          <span>绑定手机</span>\n          <el-input placeholder=\"请输入手机号码\" v-model=\"phoneData\"></el-input>\n          <div class=\"btn-group\">\n            <el-button @click=\"saveEdit('phone')\" size=\"small\" type=\"primary\">保存</el-button>\n            <el-button @click=\"cancelEdit('phone')\" size=\"small\">取消</el-button>\n          </div>\n        </div>\n      </div>\n      <div class='form-item userinfo'>\n        <label>邮箱</label>\n        <div class=\"rightContent\">\n          <div v-if=\"!editEmail\" class=\"clause\">\n            <span>{{user.email}}</span>\n            <a href=\"javascript:;\" @click=\"beginEdit('email')\">修改邮箱</a>\n          </div>\n          <div v-if=\"editEmail\" class=\"clause\">\n            <span>邮箱</span>\n            <el-input placeholder=\"请输入邮箱地址\" v-model=\"emailData\"></el-input>\n            <div class=\"btn-group\">\n              <el-button @click=\"saveEdit('email')\" size=\"small\" type=\"primary\">保存</el-button>\n              <el-button @click=\"cancelEdit('email')\" size=\"small\">取消</el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync=\"showHeadUpload\"\n      title=\"上传头像\"\n    >\n      <img class='localimg' v-if=\"showLocalImg\" :src=\"localImg\" alt=\"\">\n      <el-upload :on-change=\"fileChange\" ref=\"myUpload\" class=\"avatar-uploader\" :auto-upload=\"false\" :limit=\"1\">\n        <i class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showHeadUpload = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"uploadHead\">确 定</el-button>\n     </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getUserProfile, updateUserProfile, updateUserHead } from '@/api/user'\nimport { setUser } from '@/utils/store'\n\nexport default {\n  name: 'ContentManage',\n  data () {\n    return {\n      user: {},\n      emailData: null, // 邮箱\n      phoneData: null, // 邮箱\n      userData: null, // 用户信息\n      editEmail: false, // 编辑邮箱\n      editPhone: false, // 编辑邮箱\n      editUser: false, // 编辑用户信息\n      showHeadUpload: false,\n      showLocalImg: false, // 显示本地图片\n      localImg: null\n    }\n  },\n  created () {\n    this.getUser() // 获取用户个人资料\n  },\n  computed: {\n    headImg () {\n      return this.user.photo ? this.user.photo : require('@/assets/avatar.jpg')\n    }\n  },\n  methods: {\n    fileChange () {\n      const file = document.querySelector('.el-upload .el-upload__input').files[0]\n      this.localImg = URL.createObjectURL(file)\n      this.showLocalImg = true // 显示图片\n    },\n    /***\n       * 显示上传头像的图层\n       * ***/\n    showHead () {\n      this.$refs.myUpload && this.$refs.myUpload.clearFiles() // 清除垃圾数据\n      this.showHeadUpload = true // 显示弹层\n    },\n    async getUser () {\n      const result = await getUserProfile() // 获取用户数据\n      var data = result.data\n      /*    data.token=temp.token;\n            setUser(data) //更新数据到缓存中 */\n      this.user = data // 设置用户数据\n    },\n    // 开始进入编辑态 编辑的是某个信息\n    beginEdit (type) {\n      if (this.checkOtherClose(type)) {\n        this.$message({ type: 'warning', message: '请关掉其他正在编辑的内容' })\n        return\n      }\n      if (type == 'email') {\n        this.editEmail = true // 编辑邮箱\n        this.emailData = this.user.email // 读取邮箱\n      } else if (type == 'phone') {\n        this.editPhone = true // 编辑邮箱\n        this.phoneData = this.user.phone // 读取手机号码\n      } else if (type == 'user') {\n        this.userData = { ...this.user } // 解构方式的赋值 因为如果是对象 可能造成数据会自动同步到原有数据\n        this.editUser = true // 用户信息\n      }\n    },\n    // 检查其他的编辑状态功能是否已关闭\n    checkOtherClose (type) {\n      if (type == 'email') {\n        return this.editUser\n      } else if (type == 'phone') {\n        return this.editEmail\n      } else if (type == 'user') {\n        return this.editEmail\n      }\n    },\n    // 取消编辑 通用方法\n    cancelEdit (type) {\n      if (type == 'email') {\n        this.editEmail = false // 取消编辑邮箱\n      } else if (type == 'phone') {\n        this.editPhone = false // 取消编辑用户\n      } else if (type == 'user') {\n        this.editUser = false // 取消编辑用户\n      }\n    },\n    // 保存编辑态\n    async saveEdit (type) {\n      if (type == 'email') {\n        const pattrn = /^[A-Za-z0-9._%-]+@([A-Za-z0-9-]+\\.)+[A-Za-z]{2,4}$/\n        if (this.emailData.match(pattrn)) {\n          this.user.email = this.emailData\n          await updateUserProfile(this.user)\n          // this.getUser () //重新加载数据\n          this.editEmail = false // 保存成功关闭\n        } else {\n          this.$message({ type: 'warning', message: '邮箱格式不正确!' })\n        }\n      } else if (type == 'phone') {\n        var pattrn = /^1(3|4|5|6|7|8|9)\\d{9}$/\n        if (pattrn.test(this.phoneData)) {\n          this.user.phone = this.phoneData\n          await updateUserProfile(this.user)\n          // this.getUser () //重新加载数据\n          this.editPhone = false // 保存成功关闭\n        } else {\n          this.$message({ type: 'warning', message: '手机号码不正确!' })\n        }\n      } else if (type == 'user') {\n        if (this.userData.name) {\n          await updateUserProfile(this.userData)\n          this.getUser() // 重新加载数据\n          this.editUser = false // 保存成功关闭\n        } else {\n          this.$message({ type: 'warning', message: '头条号名称不能为空' })\n        }\n      }\n    },\n    // 修改头像\n    async uploadHead () {\n      const files = document.querySelector('.el-upload .el-upload__input').files\n      if (files && files.length) {\n        const fd = new FormData()\n        fd.append('photo', files[0], files[0].name)\n        await updateUserHead(fd)\n        this.$message({ message: '上传成功', type: 'success' }) && this.getUser() // 重新加载数据\n      } else {\n        this.$message({ message: '请选择一张图片', type: 'warning' })\n      }\n    }\n  }\n}\n</script>\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n  .user-container {\n    background-color: #ffffff;\n    text-align: left;\n    border: 1px solid #e7e7e9;\n    font-size: 14px;\n\n    .avatar-uploader {\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      width: 178px;\n      height: 178px;\n      margin: 0 auto;\n    }\n\n    .localimg {\n      width: 178px;\n      height: 178px;\n      border-radius: 4px;\n      position: absolute;\n    }\n\n    .avatar-uploader:hover {\n      border-color: #409EFF;\n    }\n\n    .avatar-uploader-icon {\n      font-size: 28px;\n      color: #8c939d;\n      width: 178px;\n      height: 178px;\n      line-height: 178px;\n      text-align: center;\n    }\n\n    header {\n      color: #323745;\n      height: 55px;\n      line-height: 55px;\n      padding: 0 15px;\n      background-color: #fbfbfb;\n      border-bottom: 1px solid #e8e8e8;\n    }\n\n    .wrap {\n      padding: 0 30px 80px;\n\n      .form-item {\n        overflow: hidden;\n        border-bottom: 1px solid #e8e8e8;\n        padding: 25px 0;\n\n        &:last-child {\n          border: none;\n        }\n\n        label {\n          float: left;\n          width: 80px;\n          text-align: right;\n          font-weight: normal;\n          color: #323745;\n\n          img {\n            width: 60px;\n            height: 60px;\n            border-radius: 50%;\n          }\n        }\n\n        .rightContent {\n          margin-left: 120px;\n          overflow: hidden;\n        }\n      }\n    }\n\n    .username {\n      .edituser {\n        margin-left: 100px;\n\n        .btn-group {\n          margin-left: 120px;\n          margin-top: 20px;\n        }\n      }\n\n      .rightContent {\n        display: flex;\n        justify-content: space-between;\n        margin-top: 8px;\n\n        dl {\n          dt {\n            font-size: 16px;\n          }\n\n          dd {\n            color: #999999;\n            font-size: 12px;\n            margin-top: 7px;\n          }\n        }\n      }\n    }\n\n    .userinfo {\n      padding-bottom: 0 !important;\n\n      .rightContent {\n        margin-top: -20px;\n      }\n\n      .clause {\n\n        color: #666666;\n        border-bottom: 1px solid #e8e8e8;\n        line-height: 60px;\n\n        .btn-group {\n          margin-left: 120px;\n          line-height: 40px;\n          margin-bottom: 10px;\n        }\n\n        &:last-child {\n          border: none;\n        }\n\n        a {\n          float: right;\n          color: #3296fa;\n        }\n\n        span {\n          color: #333333;\n          width: 120px;\n          display: inline-block;\n        }\n      }\n    }\n\n    .el-input {\n      width: auto;\n    }\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-container\"},[_c('header',[_vm._v(\"账号信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"form-item username\"},[_c('label',[_c('div',[_c('img',{staticClass:\"user-avatar\",attrs:{\"src\":_vm.headImg}}),_c('br'),_vm._v(\" \"),_c('a',{staticStyle:{\"color\":\"#3296fa\"},attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.showHead}},[_vm._v(\"更换头像\")])])]),_vm._v(\" \"),(!_vm.editUser)?_c('div',{staticClass:\"rightContent\"},[_c('dl',[_c('dt',[_vm._v(_vm._s(_vm.user.name))]),_vm._v(\" \"),_c('dd',[_vm._v(_vm._s(_vm.user.intro))])]),_vm._v(\" \"),_c('a',{staticStyle:{\"color\":\"#3296fa\"},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.beginEdit('user')}}},[_vm._v(\"修改\")])]):_vm._e(),_vm._v(\" \"),(_vm.editUser)?_c('div',{staticClass:\"clause edituser\"},[_c('el-form',[_c('el-form-item',{attrs:{\"label-width\":\"120px\",\"label\":\"名称\"}},[_c('el-input',{staticStyle:{\"width\":\"30%\"},attrs:{\"placeholder\":\"请输入头条号名称\"},model:{value:(_vm.userData.name),callback:function ($$v) {_vm.$set(_vm.userData, \"name\", $$v)},expression:\"userData.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label-width\":\"120px\",\"label\":\"简介\"}},[_c('el-input',{staticStyle:{\"width\":\"30%\"},attrs:{\"placeholder\":\"请输入头条号简介\"},model:{value:(_vm.userData.intro),callback:function ($$v) {_vm.$set(_vm.userData, \"intro\", $$v)},expression:\"userData.intro\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"btn-group\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveEdit('user')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.cancelEdit('user')}}},[_vm._v(\"取消\")])],1)],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"form-item userinfo\"},[_c('label',[_vm._v(\"账号信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"rightContent\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"clause\"},[_c('span',[_vm._v(\"头条号ID\")]),_vm._v(_vm._s(_vm.user.id)+\"\\n        \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item userinfo\"},[_c('label',[_vm._v(\"登录方式\")]),_vm._v(\" \"),_c('div',{staticClass:\"rightContent\"},[(!_vm.editPhone)?_c('div',{staticClass:\"clause\"},[_c('span',[_vm._v(\"绑定手机\")]),_vm._v(_vm._s(_vm.user.phone)+\"\\n          \"),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.beginEdit('phone')}}},[_vm._v(\"修改绑定手机\")])]):_vm._e()]),_vm._v(\" \"),(_vm.editPhone)?_c('div',{staticClass:\"clause\"},[_c('span',[_vm._v(\"绑定手机\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入手机号码\"},model:{value:(_vm.phoneData),callback:function ($$v) {_vm.phoneData=$$v},expression:\"phoneData\"}}),_vm._v(\" \"),_c('div',{staticClass:\"btn-group\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveEdit('phone')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.cancelEdit('phone')}}},[_vm._v(\"取消\")])],1)],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"form-item userinfo\"},[_c('label',[_vm._v(\"邮箱\")]),_vm._v(\" \"),_c('div',{staticClass:\"rightContent\"},[(!_vm.editEmail)?_c('div',{staticClass:\"clause\"},[_c('span',[_vm._v(_vm._s(_vm.user.email))]),_vm._v(\" \"),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.beginEdit('email')}}},[_vm._v(\"修改邮箱\")])]):_vm._e(),_vm._v(\" \"),(_vm.editEmail)?_c('div',{staticClass:\"clause\"},[_c('span',[_vm._v(\"邮箱\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入邮箱地址\"},model:{value:(_vm.emailData),callback:function ($$v) {_vm.emailData=$$v},expression:\"emailData\"}}),_vm._v(\" \"),_c('div',{staticClass:\"btn-group\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveEdit('email')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.cancelEdit('email')}}},[_vm._v(\"取消\")])],1)],1):_vm._e()])])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.showHeadUpload,\"title\":\"上传头像\"},on:{\"update:visible\":function($event){_vm.showHeadUpload=$event}}},[(_vm.showLocalImg)?_c('img',{staticClass:\"localimg\",attrs:{\"src\":_vm.localImg,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('el-upload',{ref:\"myUpload\",staticClass:\"avatar-uploader\",attrs:{\"on-change\":_vm.fileChange,\"auto-upload\":false,\"limit\":1}},[_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showHeadUpload = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.uploadHead}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"clause\"},[_c('span',[_vm._v(\"头条号类型\")]),_vm._v(\"个人\\n        \")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71032f08\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71032f08\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71032f08\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-71032f08\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}