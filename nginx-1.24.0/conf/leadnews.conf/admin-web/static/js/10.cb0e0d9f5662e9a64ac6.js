webpackJsonp([10],{"+tep":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),r=a("Dd8w"),l=a.n(r),u=a("exGp"),o=a.n(u),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"filter"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"搜索内容："}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入内容标题",clearable:""},on:{change:t.queryData},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择类型："}},[a("el-radio-group",{on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusList,function(e,s){return a("el-radio",{key:s,attrs:{label:e.label}},[t._v(t._s(e.value))])}),1)],1)],1)],1)])},staticRenderFns:[]},c=a("VU/8")({props:["statusList","changeParam"],data:function(){return{title:"",status:""}},methods:{queryData:function(){var t={};t.title=this.title,""!==this.status&&(t.status=this.status),this.changeParam(t)},changeStatus:function(){this.queryData()}}},i,!1,null,null,null).exports,p=a("xT6B"),d=a("No1E"),f={props:["list","pageSize","total","changePage","submitSuccess"],data:function(){return{listPage:{currentPage:1},typeList:[{value:0,label:"无图文章"},{value:1,label:"单图文章"},{value:3,label:"多图文章"}],statusList:[{value:0,label:"草稿"},{value:1,label:"提交（待审核）"},{value:2,label:"审核失败"},{value:3,label:"人工审核"},{value:4,label:"人工审核通过"},{value:8,label:"审核通过（待发布）"},{value:9,label:"已发布"}]}},methods:{pageChange:function(t){this.changePage&&this.changePage({page:t})},dateFormat:function(t){return p.a.format13HH(t)},operateForView:function(t){this.$router.push({path:"/content/detail",query:{id:t.id}})},operateForPass:function(t){var e=this;return o()(n.a.mark(function a(){var s,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={id:t,status:4},a.next=3,Object(d.d)(s);case 3:200===(r=a.sent).code?(e.submitSuccess(),e.$message({type:"success",message:"操作成功！"})):e.$message({type:"error",message:r.errorMessage});case 5:case"end":return a.stop()}},a,e)}))()},operateForFail:function(t){var e={id:t,status:2};this.open("请输入驳回理由",e)},open:function(t,e){var a,s=this;this.$prompt(void 0,"驳回理由",{confirmButtonText:"提交",confirmButtonClass:"el-button--success",cancelButtonText:"取消",cancelButtonClass:"el-button--warning",inputPlaceholder:t,inputType:"textarea"}).then((a=o()(n.a.mark(function t(a){var r,l=a.value;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.msg=l,t.next=3,Object(d.a)(e);case 3:200===(r=t.sent).code?(s.submitSuccess(),s.$message({type:"success",message:"操作成功！"})):s.$message({type:"error",message:r.errorMessage});case 5:case"end":return t.stop()}},t,s)})),function(t){return a.apply(this,arguments)})).catch(function(){s.$message({type:"info",message:"已取消驳回"})})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"result"},[a("el-table",{attrs:{data:t.list,"header-cell-style":{textAlign:"center",fontWeight:"600"},"cell-style":{textAlign:"center"},"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"作者"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.authorName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.typeList.find(function(t){return t.value===e.row.type}).label))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.labels))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"定时时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(t.dateFormat(e.row.publishTime).split(" ").join("<br/>"))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(t.dateFormat(e.row.createdTime).split(" ").join("<br/>"))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(t.dateFormat(e.row.submitedTime).split(" ").join("<br/>"))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.statusList.find(function(t){return t.value===e.row.status}).label))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"el-button--success-text",attrs:{type:"text"},on:{click:function(a){return t.operateForView(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{staticClass:"el-button--primary-text",attrs:{type:"text",disabled:3!==e.row.status},on:{click:function(a){return t.operateForPass(e.row.id)}}},[t._v("通过")]),t._v(" "),a("el-button",{staticClass:"el-button--danger-text",attrs:{type:"text",disabled:3!==e.row.status},on:{click:function(a){return t.operateForFail(e.row.id)}}},[t._v("驳回")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":t.listPage.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.pageChange,"update:currentPage":function(e){return t.$set(t.listPage,"currentPage",e)},"update:current-page":function(e){return t.$set(t.listPage,"currentPage",e)}}})],1)],1)},staticRenderFns:[]},g={name:"ChannelManager",data:function(){return{params:{page:1,size:10,title:"",status:""},total:0,list:[],statusList:[{label:"",value:"全部"},{label:3,value:"待人工审核"},{label:4,value:"人工审核通过"},{label:2,value:"审核失败"},{label:9,value:"已发布"}]}},mounted:function(){this.loadData()},components:{SearchTool:c,SearchResult:a("VU/8")(f,m,!1,null,null,null).exports},methods:{submitSuccess:function(){this.loadData()},changeParam:function(t){this.params.page=1,this.params.title=t.title,this.params.status=t.status,this.loadData()},changePage:function(t){this.params.page=t.page,this.loadData()},loadData:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(l()({},t.params));case 2:200===(a=e.sent).code?(t.list=a.data,t.total=a.total):t.$message({type:"error",message:a.error_message});case 4:case"end":return e.stop()}},e,t)}))()}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("search-tool",{attrs:{changeParam:t.changeParam,statusList:t.statusList}}),t._v(" "),a("search-result",{ref:"mySearchResult",attrs:{list:t.list,total:t.total,changePage:t.changePage,submitSuccess:t.submitSuccess,pageSize:t.params.size}})],1)},staticRenderFns:[]},h=a("VU/8")(g,b,!1,null,null,null);e.default=h.exports},No1E:function(t,e,a){"use strict";e.b=function(t){return new s.a({url:n.n,method:"post",data:t})},e.c=function(t){return new s.a({url:n.o+t,method:"get"})},e.d=function(t){return new s.a({url:n.p,method:"post",data:t})},e.a=function(t){return new s.a({url:n.m,method:"post",data:t})};var s=a("vLgD"),n=a("2EN7")}});
//# sourceMappingURL=10.cb0e0d9f5662e9a64ac6.js.map