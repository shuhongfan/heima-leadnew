webpackJsonp([8],{"6jWX":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("Dd8w"),i=a.n(n),o=a("exGp"),l=a.n(o),c=a("mvHQ"),u=a.n(c),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"filter"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"敏感词："}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入敏感词",clearable:""},on:{change:e.queryData},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)],1),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline"},on:{click:e.addData}},[e._v("新建")])],1)},staticRenderFns:[]},m=a("VU/8")({props:["changeParam","addData"],data:function(){return{name:""}},methods:{queryData:function(){this.changeParam(this.name)}}},d,!1,null,null,null).exports,f=a("xT6B"),p=a("vLgD"),g=a("2EN7");function h(e){return new p.a({url:g.q+e,method:"delete"})}var v={props:["host","list","table","pageSize","total","changePage","editData","submitSuccess"],data:function(){return{listPage:{currentPage:1}}},methods:{pageChange:function(e){this.changePage&&this.changePage({page:e})},dateFormat:function(e){return f.a.format13HH(e)},operateForEditor:function(e){this.editData(e)},operateForDelete:function(e){var t=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.showDeleteConfirm();case 3:t.doDelete(e),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),t.$message({type:"info",message:"已取消删除"});case 9:case"end":return a.stop()}},a,t,[[0,6]])}))()},showDeleteConfirm:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("删除后敏感词将不可找回，确认将敏感词删除吗？","删除",{confirmButtonText:"删除",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",cancelButtonClass:"el-button--warning"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}))()},doDelete:function(e){var t=this;return l()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h(e);case 2:200===(s=a.sent).code?(t.submitSuccess(),t.$message({type:"success",message:"操作成功！"})):t.$message({type:"error",message:s.errorMessage});case 4:case"end":return a.stop()}},a,t)}))()}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"result"},[a("el-table",{attrs:{data:e.list,"header-cell-style":{textAlign:"center",fontWeight:"600"},"cell-style":{textAlign:"center"},"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"敏感词"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sensitives))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.dateFormat(t.row.createdTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-button--success-text",attrs:{type:"text"},on:{click:function(a){return e.operateForEditor(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-button--danger-text",attrs:{type:"text"},on:{click:function(a){return e.operateForDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.listPage.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.listPage,"currentPage",t)},"update:current-page":function(t){return e.$set(e.listPage,"currentPage",t)}}})],1)},staticRenderFns:[]},x={name:"commn-editor",props:["title","submitSuccess"],data:function(){return{disable:!1,model:"add",dialogFormVisible:!1,formLabelWidth:"80px",form:{},rules:{}}},methods:{add:function(){this.dialogFormVisible=!0,this.form={},this.model="add"},edit:function(e){this.dialogFormVisible=!0,this.form=e,this.model="edit"},submit:function(){var e=this;this.$refs.commForm.validate(function(t){if(!t)return!1;"add"===e.model?e.saveSensitive():e.updateSensitive()})},saveSensitive:function(){var e=this;return l()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={sensitives:e.form.sensitives},t.next=3,r=a,new p.a({url:g.s,method:"post",data:r});case 3:200===(s=t.sent).code?(e.dialogFormVisible=!1,e.submitSuccess(),e.$message({type:"success",message:"操作成功！"})):e.$message({type:"error",message:s.errorMessage});case 5:case"end":return t.stop()}var r},t,e)}))()},updateSensitive:function(){var e=this;return l()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:e.form.id,sensitives:e.form.sensitives},t.next=3,r=a,new p.a({url:g.t,method:"post",data:r});case 3:200===(s=t.sent).code?(e.dialogFormVisible=!1,e.submitSuccess(),e.$message({type:"success",message:"操作成功！"})):e.$message({type:"error",message:s.errorMessage});case 5:case"end":return t.stop()}var r},t,e)}))()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"dialog",attrs:{title:e.title,visible:e.dialogFormVisible,width:"442px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"commForm",attrs:{model:e.form,rules:e.rules,inline:!0,"label-width":"70px","label-position":"left"}},[a("el-form-item",{attrs:{label:"敏感词："}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入敏感词"},model:{value:e.form.sensitives,callback:function(t){e.$set(e.form,"sensitives",t)},expression:"form.sensitives"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var w={name:"SensitiveIndex",data:function(){return{params:{page:1,size:10,name:""},total:0,host:"",list:[],fileds:[{label:"敏感词",name:"sensitives",type:"input",placeholder:"请输入敏感词",rule:[{required:!0,message:"请输入敏感词",trigger:"blur"},{min:2,max:8,message:"敏感词在2~8个字符",trigger:"blur"}]},{label:"创建时间",name:"created_time",type:"hidden",value:f.a.format13HH((new Date).getTime())}],title:""}},mounted:function(){this.loadData()},components:{SearchTool:m,SearchResult:a("VU/8")(v,b,!1,null,null,null).exports,Editor:a("VU/8")(x,_,!1,function(e){a("j4Mq")},"data-v-0fde084f",null).exports},methods:{editData:function(e){this.title="编辑敏感词",this.$refs.editor.edit(JSON.parse(u()(e)))},addData:function(e){this.title="新增敏感词",this.$refs.editor.add()},submitSuccess:function(){this.loadData()},changeParam:function(e){this.params.page=1,this.params.name=e,this.loadData()},changePage:function(e){this.params.page=e.page,this.loadData()},loadData:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s=i()({},e.params),new p.a({url:g.r,method:"post",data:s});case 2:200===(a=t.sent).code?(e.list=a.data,e.host=a.host,e.total=a.total):e.$message({type:"error",message:a.errorMessage});case 4:case"end":return t.stop()}var s},t,e)}))()}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Editor",{ref:"editor",attrs:{title:e.title,submitSuccess:e.submitSuccess}}),e._v(" "),a("search-tool",{attrs:{changeParam:e.changeParam,addData:e.addData}}),e._v(" "),a("search-result",{ref:"mySearchResult",attrs:{list:e.list,host:e.host,total:e.total,table:this.params.name,editData:e.editData,changePage:e.changePage,submitSuccess:e.submitSuccess,pageSize:e.params.size}})],1)},staticRenderFns:[]},D=a("VU/8")(w,y,!1,null,null,null);t.default=D.exports},j4Mq:function(e,t){}});
//# sourceMappingURL=8.770c787db64081f0c622.js.map