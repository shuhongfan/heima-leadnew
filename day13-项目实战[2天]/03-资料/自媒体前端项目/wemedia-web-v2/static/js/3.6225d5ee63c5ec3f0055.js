webpackJsonp([3],{"+KWZ":function(e,t,i){"use strict";t.b=function(e){return Object(a.a)({url:r.c+"/"+e,method:"get",params:{}})},t.a=function(e){return Object(a.a)({url:r.b+"/"+e,method:"get"})},t.c=function(e){return Object(a.a)({url:r.r,method:"post",data:e,params:{}})},t.d=function(e){return Object(a.a)({url:r.d,method:"post",data:e,params:{}})};var a=i("vLgD"),r=i("2EN7")},"2EiJ":function(e,t,i){"use strict";var a=i("mvHQ"),r=i.n(a),n=i("Xxa5"),s=i.n(n),l=i("exGp"),o=i.n(l),c={name:"HeimaEditor",mixins:[i("Q50t").a],props:{datas:{type:Array,default:function(){return[{type:"text",value:"请在这里输入正文"}]}}},data:function(){return{text:{addText:"添加文字",editText:"编辑文字"},controller:{editorKey:0,editorTitle:"",editorText:"",dialogTextVisible:!1},content:[]}},created:function(){this.setContent(this.datas)},methods:{setContent:function(e){e.length>0?this.content=e:this.content=this.datas},deleteItem:function(){var e=o()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.content.length>1)){e.next=12;break}return e.prev=1,e.next=4,this.showDeleteConfirm("");case 4:this.content.splice(t,1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("err: "+e.t0);case 10:e.next=13;break;case 12:this.$message({type:"warning",message:"不能全部删除内容，请编辑！"});case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),clearStyle:function(e){this.getStyle(e,"w","0"),this.$set(this.content[e],"style",{})},editImg:function(e){this.$emit("addImg",{key:e,type:"edit"})},addImg:function(e){this.$emit("addImg",{key:e,type:"add"})},addText:function(e){this.controller.editorTitle=this.text.addText,this.controller.editorKey=e,this.controller.editorText="",this.controller.dialogTextVisible=!0},enditorText:function(e){this.controller.editorTitle=this.text.editText,this.controller.editorKey=e,this.controller.editorText=this.content[e].value,this.controller.dialogTextVisible=!0},saveImage:function(e,t){if("add"===e.type){var i={type:"image",value:t};this.content.splice(e.key,0,i)}else this.$set(this.content[e.key],"type","image"),this.$set(this.content[e.key],"value",t)},saveText:function(e){"ok"===e?""!==this.controller.editorText?this.controller.editorTitle===this.text.editText?(this.$set(this.content[this.controller.editorKey],"value",this.controller.editorText),this.controller.dialogTextVisible=!1):(this.content.splice(this.controller.editorKey,0,{type:"text",value:this.controller.editorText}),this.controller.dialogTextVisible=!1):alert("文字内容不能为空！"):this.controller.dialogTextVisible=!1},bold:function(e){var t=this.getStyle(e,"fontWeight","normal");t="bold"!==t?"bold":"normal",this.$set(this.content[e].style,"fontWeight",t)},up:function(e){var t=e-1;t>=0&&(this.content[t]=this.content.splice(e,1,this.content[t])[0])},down:function(e){var t=e+1;t<this.content.length&&(this.content[t]=this.content.splice(e,1,this.content[t])[0])},upFontSize:function(e){var t=this.getStyle(e,"fontSize","12");this.$set(this.content[e].style,"fontSize",parseInt(t)+1+"px")},downFontSize:function(e){var t=this.getStyle(e,"fontSize","12");this.$set(this.content[e].style,"fontSize",parseInt(t)-1+"px")},getStyle:function(e,t,i){var a=this.content[e].style;void 0===a&&(a={},this.$set(this.content[e],"style",a));var r=a[t];return void 0===r?(r=i,this.$set(this.content[e].style,t,i)):r=r.toLowerCase(),r.replace(";","").replace("px","")},getItemStyle:function(e){return void 0!==e?e:{}},getContent:function(){return r()(this.content)}}},_={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-wapper"},[e._l(e.content,function(t,a){return i("div",{key:a,staticClass:"item"},[i("div",{staticClass:"item-t-bar"},[i("li",{attrs:{title:"删除"},on:{click:function(t){return e.deleteItem(a)}}},[e._v("")]),e._v(" "),"text"==t.type?i("li",{attrs:{title:"恢复样式"},on:{click:function(t){return e.clearStyle(a)}}},[e._v("")]):e._e(),e._v(" "),"text"==t.type?i("li",{attrs:{title:"编辑内容"},on:{click:function(t){return e.enditorText(a)}}},[e._v("")]):e._e(),e._v(" "),"image"==t.type?i("li",{attrs:{title:"重新选择"},on:{click:function(t){return e.editImg(a)}}},[e._v("")]):e._e(),e._v(" "),"text"==t.type?i("li",{attrs:{title:"加粗"},on:{click:function(t){return e.bold(a)}}},[e._v("")]):e._e(),e._v(" "),i("li",{attrs:{title:"上移"},on:{click:function(t){return e.up(a)}}},[e._v("")]),e._v(" "),i("li",{attrs:{title:"下移"},on:{click:function(t){return e.down(a)}}},[e._v("")]),e._v(" "),"text"==t.type?i("li",{attrs:{title:"加大字号"},on:{click:function(t){return e.upFontSize(a)}}},[e._v("")]):e._e(),e._v(" "),"text"==t.type?i("li",{attrs:{title:"减小字号"},on:{click:function(t){return e.downFontSize(a)}}},[e._v("")]):e._e(),e._v(" "),i("li",{staticStyle:{float:"left"},attrs:{title:"添加文字"},on:{click:function(t){return e.addText(a)}}},[e._v("")]),e._v(" "),i("li",{staticStyle:{float:"left"},attrs:{title:"添加图片"},on:{click:function(t){return e.addImg(a)}}},[e._v("")])]),e._v(" "),"text"==t.type?i("div",{staticClass:"item-t",style:t.style},[e._v(e._s(t.value))]):e._e(),e._v(" "),"image"==t.type?i("div",{staticClass:"item-i"},[i("img",{staticStyle:{"max-width":"290px"},attrs:{src:t.value}})]):e._e()])}),e._v(" "),i("el-dialog",{attrs:{width:"849px",center:"",title:e.controller.editorTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.controller.dialogTextVisible},on:{"update:visible":function(t){return e.$set(e.controller,"dialogTextVisible",t)}}},[i("el-form",[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.controller.editorText,callback:function(t){e.$set(e.controller,"editorText",t)},expression:"controller.editorText"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"el-button--no-icon",attrs:{type:"warning"},on:{click:function(t){return e.saveText("cancel")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"el-button--no-icon",attrs:{type:"success"},on:{click:function(t){return e.saveText("ok")}}},[e._v("确定")])],1)],1)],2)},staticRenderFns:[]};var u=i("VU/8")(c,_,!1,function(e){i("Zszh")},"data-v-ab3beb20",null);t.a=u.exports},CRt3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pEvr"),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-container bgc"},[i("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"hide-required-asterisk":"",size:"medium"}},[i("el-form-item",{attrs:{prop:"title"}},[i("el-input",{staticClass:"filter-item title",attrs:{placeholder:"请在这里输入标题",maxlength:"30","show-word-limit":""},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"content"}},[i("Heima",{ref:"heima",on:{addImg:e.selectHeiMaImg}})],1),e._v(" "),i("el-form-item",[i("el-col",{attrs:{span:4}},[i("el-form-item",{attrs:{label:"标签：",prop:"labels","label-width":"55px"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入标签",maxlength:"20","show-word-limit":""},model:{value:e.formData.labels,callback:function(t){e.$set(e.formData,"labels",t)},expression:"formData.labels"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-form-item",{attrs:{label:"频道：",prop:"channelId","label-width":"85px"}},[i("el-select",{attrs:{placeholder:"请选择频道"},model:{value:e.formData.channelId,callback:function(t){e.$set(e.formData,"channelId",t)},expression:"formData.channelId"}},e._l(e.channelList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"定时：",prop:"publishTime","label-width":"85px"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择日期时间","default-time":"12:00:00","picker-options":e.pickerOptions},model:{value:e.formData.publishTime,callback:function(t){e.$set(e.formData,"publishTime",t)},expression:"formData.publishTime"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"images"}},[i("el-row",[i("el-form-item",{attrs:{label:"封面：","label-width":"55px"}},[i("el-radio-group",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[i("el-radio",{attrs:{label:"1"}},[e._v("单图")]),e._v(" "),i("el-radio",{attrs:{label:"3"}},[e._v("三图")]),e._v(" "),i("el-radio",{attrs:{label:"0"}},[e._v("无图")]),e._v(" "),i("el-radio",{attrs:{label:"-1"}},[e._v("自动")])],1)],1)],1),e._v(" "),i("el-row",["1"==e.formData.type||"3"==e.formData.type?i("el-form-item",["1"==e.formData.type?i("div",{staticClass:"single_pic",on:{click:e.selectSinglePic}},[e.singlePic?e._e():i("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon_btn_addpic"}})]),e._v(" "),e.singlePic?e._e():i("span",[e._v("选择图片")]),e._v(" "),e.singlePic?i("img",{attrs:{src:e.parseImage(e.singlePic)}}):e._e()]):e._e(),e._v(" "),"3"==e.formData.type?i("div",{staticClass:"three_pic"},e._l(e.threePicList,function(t,a){return i("div",{key:a,staticClass:"three_pic_item",on:{click:function(t){return e.selectThreePic(a)}}},[t?e._e():i("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon_btn_addpic"}})]),e._v(" "),t?e._e():i("span",[e._v("选择图片")]),e._v(" "),t?i("img",{attrs:{src:e.parseImage(t)}}):e._e()])}),0):e._e()]):e._e()],1)],1),e._v(" "),i("el-form-item",{staticClass:"btn"},[i("el-button",{staticClass:"filter-item el-button--has-icon",attrs:{type:"warning"},on:{click:function(t){return e.publish(!0)}}},[i("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#iconicon_btn_savesketch"}})]),e._v("\n        存入草稿\n      ")]),e._v(" "),i("el-button",{staticClass:"filter-item el-button--has-icon",attrs:{type:"success"},on:{click:function(t){return e.publish(!1)}}},[i("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#iconicon_btn_tjsh"}})]),e._v("\n        提交审核\n      ")])],1)],1),e._v(" "),i("material-select-dialog",{attrs:{showPicDialog:e.showPicDialog},on:{"update:showPicDialog":function(t){e.showPicDialog=t},"update:show-pic-dialog":function(t){e.showPicDialog=t},btnOKImg:e.btnOKImg}})],1)},staticRenderFns:[]};var n=function(e){i("gDvC")},s=i("VU/8")(a.a,r,!1,n,"data-v-53ad9cf8",null);t.default=s.exports},G2nT:function(e,t,i){"use strict";var a=i("Xxa5"),r=i.n(a),n=i("exGp"),s=i.n(n),l=i("+ThO"),o=i("ZRl7"),c=i("W3Tz"),_={name:"MaterialSelectDialog",components:{Pagination:l.a,Upload:o.a},props:["showPicDialog"],data:function(){return{activeName:!1,activeName2:"all",imgData:[],total:0,listQuery:{page:1,size:10},selectedImg:{},selectedImgUrl:i("LPmm"),unselectedImgUrl:i("dC2I")}},computed:{syncShowPicDialog:{get:function(){return this.showPicDialog},set:function(e){this.$emit("update:showPicDialog",e)}}},methods:{open:function(){this.listQuery.page=1,this.getList()},handleTabClick:function(){this.listQuery.page=1,this.getList()},getList:function(e){var t=this;return s()(r.a.mark(function e(){var i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="collect"===t.activeName2,e.next=3,Object(c.c)({page:t.listQuery.page,size:t.listQuery.size,isCollection:i?1:0});case 3:a=e.sent,t.imgData=a.data,t.total=a.total;case 6:case"end":return e.stop()}},e,t)}))()},selectPic:function(e,t){this.selectedImg={id:e,url:t}},uploadSuccess:function(e){this.selectedImg={url:e}},btnOKImg:function(){this.$emit("btnOKImg",this.selectedImg.url),this.syncShowPicDialog=!1},cancleImg:function(){this.syncShowPicDialog=!1}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"849px","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.syncShowPicDialog,"show-close":!1,center:!0},on:{"update:visible":function(t){e.syncShowPicDialog=t},open:e.open}},[a("el-switch",{attrs:{width:151,"active-text":"本地上传","inactive-text":"素材库","active-color":"#F3F4F7","inactive-color":"#F3F4F7"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.activeName,expression:"!activeName"}]},[a("div",{staticStyle:{display:"flex"}},[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"全部",name:"all"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"收藏",name:"collect"}})],1),e._v(" "),a("div",{staticClass:"img_list_con"},e._l(e.imgData,function(t){return a("div",{key:t.id,staticClass:"img_list",on:{click:function(i){return e.selectPic(t.id,t.url)}}},[a("el-image",{attrs:{src:t.url}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[a("img",{attrs:{src:i("LZnl")}})]),e._v(" "),a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{attrs:{src:i("Wj2+")}})])]),e._v(" "),a("img",{staticClass:"checkbox_img",attrs:{src:t.id===e.selectedImg.id?e.selectedImgUrl:e.unselectedImgUrl}})],1)}),0)],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.getList}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.activeName,expression:"activeName"}]},[a("upload",{attrs:{dialogVisible:e.syncShowPicDialog},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button--no-icon",attrs:{type:"warning"},on:{click:e.cancleImg}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"el-button--no-icon",attrs:{type:"success"},on:{click:e.btnOKImg}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var d=i("VU/8")(_,u,!1,function(e){i("lzeY")},"data-v-662cf8d2",null);t.a=d.exports},LPmm:function(e,t){e.exports="data:image/png;base64,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"},ZRl7:function(e,t,i){"use strict";var a=i("Xxa5"),r=i.n(a),n=i("exGp"),s=i.n(n),l=i("W3Tz"),o={name:"upload",props:["dialogVisible"],data:function(){return{uploadImgUrl:"",file:{}}},watch:{dialogVisible:function(e,t){e||this.clearFiles()}},methods:{handleChange:function(e,t){this.file=e},handleExceed:function(e,t){this.$set(t[0],"raw",e[0]),this.$set(t[0],"name",e[0].name),this.$refs.upload.clearFiles(),this.$refs.upload.handleStart(e[0])},handleRemove:function(e,t){this.clearFiles()},fnUpload:function(){var e=this;return s()(r.a.mark(function t(){var i,a,n,s,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.file.raw){t.next=4;break}return e.$message.error("请选择图片"),t.abrupt("return");case 4:if(a="image/jpeg"===i.type||"image/png"===i.type,n=i.size/1024/1024<2,a){t.next=9;break}return e.$message.error("上传图片只能是jpg/png格式"),t.abrupt("return");case 9:if(n){t.next=12;break}return e.$message.error("上传图片大小不能超过2MB"),t.abrupt("return");case 12:return(s=new FormData).append("multipartFile",i,i.name),t.next=16,Object(l.g)(s);case 16:200===(o=t.sent).code?(e.$message({message:"上传成功",type:"success"}),e.uploadImgUrl=o.data.url,e.$emit("uploadSuccess",e.uploadImgUrl),e.clearFiles()):e.$message({message:o.error_message,type:"error"});case 18:case"end":return t.stop()}},t,e)}))()},clearFiles:function(){this.$refs.upload.clearFiles(),this.uploadImgUrl="",this.file={}}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{ref:"upload",staticClass:"uploader",attrs:{action:"",accept:".jpg,.png","show-file-list":!0,"auto-upload":!1,limit:1,"on-change":e.handleChange,"on-remove":e.handleRemove,"on-exceed":e.handleExceed}},[e.uploadImgUrl?e._e():i("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon_btn_addpic"}})]),e._v(" "),e.uploadImgUrl?e._e():i("span",[e._v("选择图片")]),e._v(" "),e.uploadImgUrl?i("img",{staticClass:"avatar",attrs:{src:e.uploadImgUrl}}):e._e(),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n      支持扩展名：jpg、png，文件不得大于2MB\n    ")])]),e._v(" "),i("el-button",{staticClass:"el-button--has-icon",staticStyle:{"margin-top":"30px"},attrs:{type:"success"},on:{click:e.fnUpload}},[i("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#iconicon_btn_tjsh"}})]),e._v("\n    开始上传\n  ")])],1)},staticRenderFns:[]};var _=i("VU/8")(o,c,!1,function(e){i("vceP")},null,null);t.a=_.exports},Zszh:function(e,t){},dC2I:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABCCAYAAADnodDVAAAJ+0lEQVR4Xu1be1CU1xX/HRQGMQirovhIFHGKRGI7rRRXqzMSVliFijYKiGOmSQkxU0fBZIq1iEqsdqqgMROlNOnEkQraKlZ0RSjOaHWl2E6LUjQR1PjCoCAalQHkdg6z385l3RfLssDomdl/9jv3nnN+332c10d4wYlecPvxEoCXK+AFR8DlW0AIMQDASADehh+/gkeG310ieubKd9KjAAgheP4pAGYDmAlgEoCJADwsGNkC4AqASwBOAzgJoJKIRE+B0iMACCFCACwDkAhgdDeVvw0gD8AeIrrYzbmeG+5UAAyGbwEwz9mKGuY7CiDNmUA4BQAhxFgAGwG8DcDNlvGtra2NLS0t37W1tT1h3oEDB3p5eHi84u7urrI1FkA7gC8BrCOim3bwW2XpFgBCiIEA1gNYDcDTgqT2xsbG6urq6jMlJSX/PXjw4I3KysoOw01pypQpXgsXLnxVo9F8Pzg4eIZKpQq2AuhTAFksn4jaHAXCYQCEEPy2DgB405zwe/fuVVZUVJTs2LFDX1xc/MARBSMjI31XrlypDg0N1QwfPpwPU3P0dwCLiKjRERkOASCE4NP8iOFE7yT34cOHtfn5+bnJyckVjihkaUxOTk5ofHx80pAhQyaY4eGbI4aI+PboEnUZACGEFkA+gCGypObm5vri4uIv4uPjS5ubm3vk2vL09KT8/PyIyMjIdzw9Pf1MLG0CkEBEuq4g0CUAhBB8n5/gc0sWUl9f/5/58+dv0Ov17ND0OKnVau/Dhw9n+Pn5/cBEGJ8Fc4iI/Qe7yG4AhBC89P4JYJg88+XLl/8WFhb2aVNTE5/OLiMfHx+38vLyXwYFBf3UROh9AD8molp7lLELACEEu63nALwuTdpeUlKyc86cOXwW9BqdOHEiRqPRrDC5LaoAqInI5oq0CYAQgu/1wwCiZStPnz69e9asWX/pNcslwadOnXpr5syZ75voUgRgPhFZXZn2AMDofiJPXlNTUzxx4sTf9wXjFR1qa2s/CggIiDTRaQURfWpNT6sAGJZ+DQDjidvQ0FAVEhLy4Z07d1r7EgCjRo1yr6qq2qpSqSZLetUDCLS2FWwBkAngN8qEz549+y4mJubnOp3OIaejpwHTarWqI0eO/GnAgAGvSLI+JqJ0S7ItAiCEGGUITb2UwXq9/vPp06fv62lDujP/2bNnE9Rq9bvSHOx2TySiO+bmtQbAbgDJyqDm5uZ7kyZNWnb9+nWO2fssjRs3zuPSpUt7PD09h0tK5hCR6SHZ8dgsAEIIHwB1coCj0+m2zp0793iftVxS7NixY1FarfZD6a9mAP5ExN5iJ7IEQBKAPyicT58+rfPz81v2+PFjlzo7joI9ePBgt/r6+j2DBg3yl+Z4j4hy7QWgzJDG6uCvqqo6EBISkuOoQr0x7uLFi8mTJ09eJMk+SUThNgEQQgwCwOGrMW+XlZWVsnr16gu9YYijMrdt2/ZGampqtjSezy5fIuI8gpGe2wJCCI0h4Olgam1tbVKpVIv6y/JXLONt0NjYeMDd3Z3PM4U4UCqxBQDf+3z/d1Bf9PrsXRVXrlz5KDAwUPYO04noY1sA7DVkczv4jh8/nq3VajkZ2e9Ip9PNi4qKSpEUzyOipbYA4EzOVIUpOzs7NTU1tbLfWc8Jw6ysKSkpKZw3VOg8EYXaAuAbAK8qTHFxcUv279//bX8EYPHixSMKCgr+LOl+g4heswUA+/m+ClNoaOj88+fPP+6PAEydOnVwRUUFh/IKPSCiTql3c7cAR3nGlJevr+8cV2d7nAU2Z40ePHjAKTyF2ojI3dYK4OCBfYEOGj9+/Ny+7v9bAozjgmvXrh2Tnj8lImNwx/+bWwF3AYxQBmk0mrdKS0sdyus76006Ok9ERIRvSUmJnLX6loi4Mm0kcwB8Lef7U1JS3t2+fft1R5XozXGrVq0al52d/bmkw9dE9D1bABRzallhysvLy1i6dOmZ3jTEUdl79+6dkZiYuEEaf4KIOqXNzK0Azv9xHrCDysvLv5g2bZp8lTiqj8vHnTt3bklYWNg7kuBPiGilrRXwHgBj5NfQ0HBh2LBhsjflckMcFXj//v3tQ4cO5V4FhZKJyBjmWzoEeY9clga1h4eHLzp58uRzyQRHFXPFuNmzZ/uUlZVx8VYu1wcR0VdWVwA/FEJw3X2Mwnj06NGt0dHR/SIbpOhcVFQUNW/ePDkrdIuIuI+hE1nKCO0CYMyh3b59Wz9mzBiLmVVXvNGuyrh161bm6NGj1dK43US03F4ApgMwnvxCiNbExMS39+3b1y9igoSEhBF5eXlfmnh9M4jorF0AGLYBnwPGO/Pq1aulEyZM4P6fPk+1tbVpAQEBEZKiXxFRkDnFraXFEwDI159Ys2bN+1u2bOFKUZ+ltLS0wM2bN3NKX7ZtCRGZrWdYA4CfcW7gR4q1d+/ePe/v75/WZ63nXH5d3ZaRI0ca8xkA/gUg1FKvoa3SGPf/lMoGFxYWbl6wYAH35fQ5OnTo0JuxsbFrTBSLICKL+tpTHebrz+g+tre3t2zatCll3bp1sq/Q62Bs3LgxaO3atdlubm5yF2oxEUVZU84eALjayp0hxjCypaXlflxc3AeFhYXcjdHrFBsbO6ygoOAzDw8PuXuFw3ruFOFmCYtkEwDDjcAFhgL5YGlqarqsVqtXV1dXc9mp1yg4ONhTr9dv8/HxkU95btKKIyL2BK2SXQAYQOCoap0826NHj2qXL1+enpeXxzkEl1NiYuLIXbt2ZXp7e5u2zm0kogx7FOoKAMzLiP5MnpgLJzt37lzv6soRV35WrFix3qTwwar91dA4aVernt0AGFbBYABcWZFdTI4d2srKyj6Ljo4+0lM9ggro3CtYVFQUEx4e/gERdWrXA6AHoCEiu5O4XQLAAAL3BHOVtVOBgZ/xligoKMhNSkpyapeoYnxubm5oXFxckpklzyxc0Ekioi6dSV0GQFFGCPErAL8118zMjZM5OTl/TE9P73Lrqrl9m5mZOSk5OfkXZhojmZ1L9r8mot/Zs+dNeRwGwLAauHWO3WXuI3yOnjx5crOmpuasTqc7k5GR8T97twcv8w0bNryu1WpnBAYGTvfy8noujDUI4z5AdnO5Jc4h6hYABhA4b6B8K8DfA5kl/kagrq7uQn19/Tc3b9683djY+Kipqamjbd7Hx8dLpVJ5jx07drSfn99r/v7+b9j4doC/K1K+GbjlkOWGQd0GQNoS7DBxtNipobI7ylkYy2+bvxqx6uDYK9dpAEhAzGIFDZlliyvCXgUNfPzGucKzhYhOdXGsVXanAyABwf05HFKzL/4T2ZW20wDeHv/gCj2AfUTETVtOpx4DQNZUCMH1uB8C4E9g2GXl6rO57wZvGBKy1QD+TUQ93o3qEgCc/tqcOOFLAJwIZr+c6oVfAf8H9T5bcLMOU58AAAAASUVORK5CYII="},gDvC:function(e,t){},lzeY:function(e,t){},pEvr:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray__=__webpack_require__("Gu7T"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_5__components_editor_heima_vue__=__webpack_require__("2EiJ"),__WEBPACK_IMPORTED_MODULE_6__components_material_select_dialog__=__webpack_require__("G2nT"),__WEBPACK_IMPORTED_MODULE_7__api_content__=__webpack_require__("+KWZ"),__WEBPACK_IMPORTED_MODULE_8__api_publish__=__webpack_require__("W3Tz"),__WEBPACK_IMPORTED_MODULE_9_moment__=__webpack_require__("PJh5"),__WEBPACK_IMPORTED_MODULE_9_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_moment__);__webpack_exports__.a={name:"NewsPublish",components:{Heima:__WEBPACK_IMPORTED_MODULE_5__components_editor_heima_vue__.a,MaterialSelectDialog:__WEBPACK_IMPORTED_MODULE_6__components_material_select_dialog__.a},data:function(){var e=this;return{host:"",newsId:"",formData:{id:"",title:"",type:"1",labels:"",publishTime:"",channelId:null,content:""},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},singlePic:null,threePicList:[null,null,null],channelList:[],currentType:{key:0,type:""},draft:void 0,rules:{title:[{validator:function(t,i,a){var r=e.draft;if(void 0===r)return a();if(r){if(!i)return a(new Error("文章标题不能为空"))}else if(!i||i.length<4)return a(new Error("文章标题不能小于4个字符"));a()},trigger:""}],labels:[{validator:function(t,i,a){var r=e.draft;return void 0===r?a():r||i?void a():a(new Error("内容标签不能为空"))},trigger:""}],content:[{validator:function(t,i,a){if(!JSON.parse(e.$refs.heima.getContent()).length)return a(new Error("文章内容不能为空"));a()},trigger:""}],channelId:{required:!0,message:"请选择频道",trigger:""},publishTime:[{validator:function(t,i,a){var r=e.draft;return void 0===r?a():r||i?void a():a(new Error("请选择日期时间"))},trigger:""}],images:[{validator:function(t,i,a){var r=e.draft;if(void 0===r)return a();if(!r){var n=e.formData.type;if("1"===n&&!e.singlePic)return a(new Error("文章封面未设置"));if("3"===n&&e.threePicList.includes(null))return a(new Error("文章封面未设置"))}a()},trigger:""}]},showPicDialog:!1}},created:function(){var e=this.$route.query.newsId;this.newsId=e,this.newsId&&this.getArticle(this.newsId),this.getChannels()},methods:{getChannels:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default.a.mark(function t(){var i;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(__WEBPACK_IMPORTED_MODULE_8__api_publish__.d)();case 2:i=t.sent,e.channelList=i.data;case 4:case"end":return t.stop()}},t,e)}))()},parseImage:function(e){return e.indexOf("http")>-1?e:this.host+e},getArticle:function getArticle(id){var _this3=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default.a.mark(function _callee2(){var result,type,conts;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(__WEBPACK_IMPORTED_MODULE_7__api_content__.b)(id);case 2:if(result=_context2.sent,type=null===result.data.type?-1:result.data.type,_this3.formData={id:result.data.id,title:result.data.title,channelId:result.data.channelId,labels:result.data.labels,type:""+type,publishTime:result.data.publishTime},conts=[],result.data.content)try{conts=eval("("+result.data.content+")")}catch(e){console.log("err: "+e)}_this3.$refs.heima.setContent(conts),_this3.host=result.host,_this3.transImages(_this3.formData.type,result.data.images);case 10:case"end":return _context2.stop()}},_callee2,_this3)}))()},selectHeiMaImg:function(e){this.currentType.key=e,this.currentType.type="insert",this.showPicDialog=!0},selectThreePic:function(e){this.currentType.type="three",this.currentType.index=e,this.showPicDialog=!0},selectSinglePic:function(){this.currentType.type="single",this.showPicDialog=!0},transImages:function(e,t){t=t.split(","),"1"===e?this.singlePic=t[0]:"3"===e&&(this.threePicList=[].concat(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default()(t)))},getImages:function(){return"1"===this.formData.type||"3"===this.formData.type?"1"===this.formData.type?this.singlePic?[this.singlePic]:[]:this.threePicList.map(function(e){return e}):[]},btnOKImg:function(e){"single"===this.currentType.type?(this.singlePic=e,this.validateImagesField()):"three"===this.currentType.type?(this.threePicList[this.currentType.index]=e,this.validateImagesField()):"insert"===this.currentType.type&&this.$refs.heima.saveImage(this.currentType.key,e)},validateImagesField:function(){if(!1===this.draft)try{this.$refs.form.validateField("images")}catch(e){console.log("err: "+e)}},publish:function(e){var t=this;return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default.a.mark(function i(){var a,r,n,s,l,o;return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.draft=e,i.prev=1,i.next=4,t.$refs.form.validate();case 4:if(a={draft:e},(r=t.formData.publishTime)&&(r=__WEBPACK_IMPORTED_MODULE_9_moment___default()(t.formData.publishTime).format("YYYY-MM-DDTHH:mm:ssZ")),n=t.getImages(),s=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(JSON.parse(t.$refs.heima.getContent()).filter(function(e){return!("text"===e.type&&"请在这里输入正文"===e.value)})),(l=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},t.formData)).publishTime=r,l.images=n,l.status=e?0:1,l.content=s,o=void 0,t.newsId){i.next=21;break}return i.next=18,Object(__WEBPACK_IMPORTED_MODULE_8__api_publish__.f)(a,l);case 18:o=i.sent,i.next=24;break;case 21:return i.next=23,Object(__WEBPACK_IMPORTED_MODULE_8__api_publish__.e)(t.newsId,a,l);case 23:o=i.sent;case 24:if(200===o.code){i.next=27;break}return t.$message({type:"warning",message:o.errorMessage}),i.abrupt("return");case 27:t.$message({type:"success",message:(t.newsId?"编辑":"新增")+"文章成功"}),t.$router.replace({path:"/news/index"}),i.next=34;break;case 31:i.prev=31,i.t0=i.catch(1),console.log("err: "+i.t0);case 34:case"end":return i.stop()}},i,t,[[1,31]])}))()}}}},vceP:function(e,t){}});
//# sourceMappingURL=3.6225d5ee63c5ec3f0055.js.map