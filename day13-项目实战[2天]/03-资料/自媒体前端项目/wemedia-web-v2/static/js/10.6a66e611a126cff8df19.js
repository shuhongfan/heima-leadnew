webpackJsonp([10],{"+KWZ":function(t,e,a){"use strict";e.b=function(t){return Object(s.a)({url:i.c+"/"+t,method:"get",params:{}})},e.a=function(t){return Object(s.a)({url:i.b+"/"+t,method:"get"})},e.c=function(t){return Object(s.a)({url:i.r,method:"post",data:t,params:{}})},e.d=function(t){return Object(s.a)({url:i.d,method:"post",data:t,params:{}})};var s=a("vLgD"),i=a("2EN7")},"/iyE":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),n=a("Gu7T"),r=a.n(n),l=a("exGp"),c=a.n(l),o=a("Q50t"),u=a("+ThO"),d=a("ErCm"),v=a("W3Tz"),p=a("+KWZ"),f={name:"NewsList",mixins:[o.a],components:{Pagination:u.a,EmptyData:d.a},data:function(){return{statusList:[{label:void 0,value:"全部"},{label:0,value:"草稿"},{label:1,value:"待审核"},{label:9,value:"审核通过"},{label:2,value:"审核失败"}],date:null,channelList:[{id:void 0,name:"全部"}],host:"",list:[],total:0,listLoading:!0,listQuery:{status:void 0,keyword:void 0,channelId:void 0,beginPubdate:void 0,endPubdate:void 0,page:1,size:10}}},created:function(){this.getChannels(),this.getList()},methods:{getChannels:function(){var t=this;return c()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.d)();case 2:a=e.sent,t.channelList=[].concat(r()(t.channelList),r()(a.data));case 4:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=this;return c()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return""===t.listQuery.keyword&&(t.listQuery.keyword=void 0),""===t.listQuery.channelId&&(t.listQuery.channelId=void 0),e.next=4,Object(p.c)(t.listQuery);case 4:a=e.sent,t.host=a.host,t.total=a.total,t.list=a.data;case 8:case"end":return e.stop()}},e,t)}))()},resetPage:function(){this.listQuery.page=1,this.getList()},handelDatePickerChange:function(){this.listQuery.beginPubdate=this.date?this.date[0]:void 0,this.listQuery.endPubdate=this.date?this.date[1]:void 0,this.resetPage()},getImage:function(t){var e=t.images.split(",");if(e.length>0)return this.host+e[0]},operateBtn:function(t,e){switch(e){case"modify":this.$router.push({path:"/news/publish",query:{newsId:t}});break;case"down":this.upOrDown(t,0);break;case"up":this.upOrDown(t,1);break;case"del":this.deleteArticlesById(t)}},deleteArticlesById:function(t){var e=this;return c()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.showDeleteConfirm("文章");case 3:return a.next=5,Object(p.a)(t);case 5:200===(s=a.sent).code?(e.$message({type:"success",message:"删除成功!"}),e.getList()):e.$message({type:"error",message:s.error_message}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("err: "+a.t0);case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()},upOrDown:function(t,e){var a=this;return c()(i.a.mark(function s(){var n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(p.d)({id:t,enable:e});case 2:200===(n=s.sent).code?(a.$message({type:"success",message:"操作成功!"}),a.getList()):a.$message({type:"error",message:n.error_message});case 4:case"end":return s.stop()}},s,a)}))()}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgc"},[s("section",{staticClass:"filter"},[s("div",{staticClass:"filter-container"},[s("el-form",{ref:"form",attrs:{inline:!0,size:"medium"}},[s("el-col",[s("el-form-item",{attrs:{label:"文章状态："}},[s("el-radio-group",{on:{change:t.resetPage},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.statusList,function(e,a){return s("el-radio",{key:a,attrs:{label:e.label}},[t._v(t._s(e.value))])}),1)],1)],1),t._v(" "),s("el-col",[s("el-form-item",{attrs:{label:"关键字："}},[s("el-input",{staticStyle:{width:"179px"},attrs:{placeholder:"请输入关键字",clearable:""},on:{input:t.resetPage},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"频道列表："}},[s("el-select",{staticStyle:{width:"179px"},attrs:{clearable:""},on:{change:t.resetPage},model:{value:t.listQuery.channelId,callback:function(e){t.$set(t.listQuery,"channelId",e)},expression:"listQuery.channelId"}},t._l(t.channelList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"发布日期："}},[s("el-date-picker",{staticStyle:{width:"239px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:t.handelDatePickerChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1)],1)]),t._v(" "),s("section",{staticClass:"result"},[t.list.length?s("div",{staticClass:"content-card"},t._l(t.list,function(e,i){return s("div",{key:i,staticClass:"item-card"},[s("el-image",{attrs:{src:e.images?t.getImage(e):a("E17r")}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[s("img",{attrs:{src:a("LZnl")}})]),t._v(" "),s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("img",{attrs:{src:a("Wj2+")}})])]),t._v(" "),s("div",{staticClass:"top"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"9"==e.status&&"0"==e.enable,expression:"item.status == '9'&&item.enable=='0'"}],staticClass:"item",on:{click:function(a){return t.operateBtn(e.id,"up")}}},[s("el-tooltip",{attrs:{effect:"dark",content:"上架",placement:"top","visible-arrow":"false"}},[s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconbtn_down"}})])])],1),t._v(" "),"9"==e.status&&"1"==e.enable?s("div",{staticClass:"item",on:{click:function(a){return t.operateBtn(e.id,"down")}}},[s("el-tooltip",{attrs:{effect:"dark",content:"下架",placement:"top","visible-arrow":"false"}},[s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconbtn_up"}})])])],1):t._e(),t._v(" "),"9"!=e.status?s("div",{staticClass:"item",on:{click:function(a){return t.operateBtn(e.id,"modify")}}},[s("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top","visible-arrow":"false"}},[s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconbtn_edit"}})])])],1):t._e(),t._v(" "),"9"!=e.status?s("div",{staticClass:"item",on:{click:function(a){return t.operateBtn(e.id,"del")}}},[s("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top","visible-arrow":"false"}},[s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconbtn_del"}})])])],1):t._e()]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"center"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"bottom"},[s("time",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(e.createdTime)))]),t._v(" "),"0"==e.status?s("span",{staticClass:"draft"},[t._v("草稿")]):t._e(),t._v(" "),"1"==e.status?s("span",{staticClass:"audit"},[t._v("待审核")]):t._e(),t._v(" "),"3"==e.status?s("span",{staticClass:"audit"},[t._v("待人工审核")]):t._e(),t._v(" "),"4"==e.status?s("span",{staticClass:"audit"},[t._v("待发布")]):t._e(),t._v(" "),"8"==e.status?s("span",{staticClass:"publish"},[t._v("待发布")]):t._e(),t._v(" "),"9"==e.status?s("span",{staticClass:"publish"},[t._v("已发表")]):t._e(),t._v(" "),"2"==e.status?s("span",{staticClass:"unaudit"},[t._v("未通过审核")]):t._e(),t._v(" "),"100"==e.status?s("span",{staticClass:"delete"},[t._v("已删除")]):t._e(),t._v(" "),"9"==e.status?["0"==e.enable?s("span",{staticClass:"draft"},[t._v("已下架")]):t._e(),t._v(" "),"1"==e.enable?s("span",{staticClass:"audit"},[t._v("已上架")]):t._e()]:t._e()],2)])],1)}),0):s("empty-data")],1),t._v(" "),s("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.size},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"size",e)},pagination:t.getList}})],1)},staticRenderFns:[]};var m=a("VU/8")(f,h,!1,function(t){a("Lq93")},"data-v-09b55fff",null);e.default=m.exports},E17r:function(t,e,a){t.exports=a.p+"static/img/pic_nopic.6de7db9.png"},Lq93:function(t,e){}});
//# sourceMappingURL=10.6a66e611a126cff8df19.js.map