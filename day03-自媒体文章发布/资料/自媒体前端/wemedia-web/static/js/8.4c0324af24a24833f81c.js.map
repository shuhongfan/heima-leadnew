{"version":3,"sources":["webpack:///src/views/material/material.vue","webpack:///./src/views/material/material.vue?e285","webpack:///./src/views/material/material.vue","webpack:///src/components/Upload/upload.vue","webpack:///./src/components/Upload/upload.vue?4e0a","webpack:///./src/components/Upload/upload.vue"],"names":["material","name","data","imgPage","total","currentPage","pageCount","pageSize","imgChange","showPicDialog","activeSelect","imgData","components","Upload","mounted","this","loadData","methods","getImgData","page","size","isCollection","pageChange","newPage","sizeChange","val","params","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","Object","publish","sent","Math","ceil","stop","collectOrCancel","img","_this2","_callee2","isCollected","_context2","id","code","$forceUpdate","$message","type","message","errorMessage","delImg","_this3","_callee3","_context3","$confirm","imgChangeCall","closeModal","material_material","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","width","active-value","inactive-value","active-text","inactive-text","active-color","inactive-color","on","change","model","value","callback","$$v","expression","_v","_s","click","$event","aria-hidden","xlink:href","_l","key","body-style","padding","shadow","class","collection","src","url","_e","layout","page-count","page-size","current-page","current-change","size-change","center","visible","show-close","before-close","update:visible","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","upload","props","upload_img_url","file","dialogVisible","handleOnChange","fileList","fnUpload","fd","raw","FormData","append","error_message","Upload_upload","action","show-file-list","auto-upload","on-change","staticStyle","margin-top"],"mappings":"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","file":"static/js/8.4c0324af24a24833f81c.js","sourcesContent":["<template>\n  <div>\n    <div class=\"filter\">\n      <div class=\"filter-container\">\n        <el-switch\n          v-model=\"activeSelect\"\n          :width=\"138\"\n          active-value=\"1\"\n          inactive-value=\"0\"\n          active-text=\"收藏\"\n          inactive-text=\"全部\"\n          active-color=\"#F3F4F7\"\n          inactive-color=\"#F3F4F7\"\n          @change=\"loadData\"\n        ></el-switch>\n      </div>\n      <div>\n        <span class=\"total\">已上传{{ imgPage.total }}张图片</span>\n        <el-button type=\"success\" @click=\"showPicDialog = true\">\n          <svg class=\"icon svg-icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#iconicon_btn_tjsh\" />\n          </svg>\n          上传图片\n        </el-button>\n      </div>\n    </div>\n    <div class=\"content-card\">\n      <el-card v-for=\"img in imgData\" :key=\"img.id\" :body-style=\"{ padding: '0px' }\" shadow=\"hover\">\n        <img class=\"image\" :class=\"{'collection': activeSelect == '1'}\" :src=\"img.url\" />\n        <div v-if=\"activeSelect == '0'\" class=\"operate\">\n          <div class=\"item\" @click=\"collectOrCancel(img)\">\n            <svg class=\"icon svg-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"img.isCollection ? '#iconbtn_collect_sel' : '#iconbtn_collect'\" />\n            </svg>\n            {{ img.isCollection ? '已收藏' : '收藏' }}\n          </div>\n          <div class=\"item\" @click=\"delImg(img)\">\n            <svg class=\"icon svg-icon\" aria-hidden=\"true\">\n              <use xlink:href=\"#iconbtn_del\" />\n            </svg>删除\n          </div>\n        </div>\n      </el-card>\n    </div>\n    <el-pagination\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"imgPage.total\"\n      :page-count=\"imgPage.pageCount\"\n      :page-size=\"imgPage.pageSize\"\n      :current-page=\"imgPage.currentPage\"\n      @current-change=\"pageChange\"\n      @size-change=\"sizeChange\"\n    ></el-pagination>\n    <el-dialog\n      width=\"849px\"\n      center\n      :visible.sync=\"showPicDialog\"\n      :show-close=\"false\"\n      :before-close=\"closeModal\"\n    >\n      <upload v-if=\"showPicDialog\" :imgChange=\"imgChangeCall\" />\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"warning\" @click=\"closeModal\">取消</el-button>\n        <el-button type=\"success\" @click=\"closeModal\">确定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { getAllImgData, delImg, collectOrCancel } from '@/api/publish'\nimport Upload from '@/components/Upload/upload.vue'\nexport default {\n  name: 'material',\n  data () {\n    return {\n      imgPage: {\n        total: 0,\n        currentPage: 1,\n        pageCount: 0,\n        pageSize: 20\n      },\n      imgChange: false, // 是否上传过图片导致图片数据变化 此状态用来控制是否在关闭后要进行重新加载\n      showPicDialog: false,\n      activeSelect: '0',\n      imgData: []// 存储图片的数据 同时作为收藏数据和全部数据的引用\n    }\n  },\n  components: {\n    Upload\n  },\n  mounted () {\n    this.loadData()\n  },\n  methods: {\n    loadData: function () {\n      // 初始化时加载数据\n      this.getImgData({\n        page: this.imgPage.currentPage,\n        size: this.imgPage.pageSize,\n        isCollection: this.activeSelect\n      })\n    },\n    // 页面发生变化\n    pageChange (newPage) {\n      this.imgPage.currentPage = newPage\n      this.loadData()\n    },\n    sizeChange(val){\n      this.imgPage.pageSize=val\n      this.loadData()\n    },\n    // 获取图片素材\n    async getImgData (params) {\n      const result = await getAllImgData(params)\n      this.imgData = result.data\n      this.imgPage.total = result.total\n      this.imgPage.pageCount = Math.ceil(this.imgPage.total / this.imgPage.pageSize)\n    },\n    // 取消或者收藏图片\n    async collectOrCancel (img) {\n      let isCollected = img.isCollection\n      if (isCollected === 1) { isCollected = 0 } else { isCollected = 1 }\n      // 取相反状态\n      const result = await collectOrCancel(img.id, { isCollected: isCollected })\n      if (result.code === 200) {\n        img.isCollection = isCollected // 取相反状态\n        this.$forceUpdate() // 强制更新\n        this.$message({ type: 'success', message: '操作成功' })\n      } else {\n        this.$message({ type: 'error', message: result.errorMessage })\n      }\n    },\n    // 删除图片\n    async delImg (img) {\n      let result = await this.$confirm('确认删除该素材?')\n      if (result) {\n        result = await delImg(img.id)// 删除数据\n        if (result.code === 200) {\n          // 写多了if  else 写个三元表达式 换换口味\n          this.$message({ type: 'success', message: '删除成功' })\n          this.loadData()\n        } else {\n          this.$message({ type: 'error', message: result.errorMessage })\n        }\n      }\n    },\n    imgChangeCall () {\n      // 图片变化了 记录改变的状态 用于关闭弹层时 重新加载数据\n      this.imgChange = true\n    },\n    // 关闭弹层时触发\n    // 注意 这里 为什么不在click用表达式赋值的方式去关掉弹层呢\n    // 因为发现在click=\"dialog = false\" 模式下 不能触发关闭的回调 应该是实现机制的顺序问题\n    closeModal () {\n      if (this.imgChange) {\n        this.loadData()\n        this.imgChange = false\n      }\n      this.showPicDialog = false\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '@/scss/element-variables.scss';\n\n.filter {\n  height: 96px;\n}\n\n/deep/ .el-switch {\n  height: auto;\n}\n\n/deep/ .el-switch__label {\n  position: absolute;\n  color: $--color-text-secondary;\n}\n\n/deep/ .el-switch__label.is-active {\n  color: $--color-text-primary;\n  font-weight: 600;\n}\n\n/deep/ .el-switch__label--left {\n  left: 0;\n  margin-left: 22px;\n  z-index: 9999;\n}\n\n/deep/ .el-switch__label--right {\n  right: 0;\n  margin-right: 23px;\n}\n\n/deep/ .el-switch__core {\n  height: 40px;\n  border-radius: 4px;\n}\n\n/deep/ .el-switch__core:after {\n  width: 63px;\n  height: 32px;\n  top: 3px;\n  left: 3px;\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.06);\n  border-radius: 4px;\n}\n\n/deep/ .el-switch.is-checked .el-switch__core::after {\n  margin-left: 65px;\n  left: 3px;\n}\n\n.total {\n  margin-right: 16px;\n  color: $--color-text-secondary;\n}\n\n.content-card {\n  display: flex;\n  padding-left: 6px;\n  padding-bottom: 30px;\n  flex-wrap: wrap;\n\n  .el-card {\n    position: relative;\n    width: 186px;\n    height: 183px;\n    margin-top: 30px;\n    margin-left: 24px;\n    border-radius: 8px;\n    border: 1px solid $--background-color-base;\n\n    .image {\n      display: block;\n      width: 100%;\n      height: 124px;\n      object-fit: cover;\n    }\n\n    .collection {\n      height: 183px;\n    }\n\n    .operate {\n      display: flex;\n      height: 57px;\n      justify-content: space-around;\n      align-items: center;\n\n      .item {\n        display: flex;\n        align-items: center;\n        font-size: 12px;\n        cursor: pointer;\n\n        .icon {\n          width: 30px;\n          height: 30px;\n        }\n      }\n    }\n  }\n\n  .el-card.is-always-shadow,\n  .el-card.is-hover-shadow:focus,\n  .el-card.is-hover-shadow:hover {\n    -webkit-box-shadow: 0px 2px 8px 4px rgba(51, 53, 58, 0.07);\n    box-shadow: 0px 2px 8px 4px rgba(51, 53, 58, 0.07);\n  }\n}\n\n.el-pagination {\n  border-top: 2px solid #EBEEF5;\n}\n\n/deep/ .el-dialog__footer {\n  border-top: 2px solid #EBEEF5;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/material/material.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"filter\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-switch',{attrs:{\"width\":138,\"active-value\":\"1\",\"inactive-value\":\"0\",\"active-text\":\"收藏\",\"inactive-text\":\"全部\",\"active-color\":\"#F3F4F7\",\"inactive-color\":\"#F3F4F7\"},on:{\"change\":_vm.loadData},model:{value:(_vm.activeSelect),callback:function ($$v) {_vm.activeSelect=$$v},expression:\"activeSelect\"}})],1),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"total\"},[_vm._v(\"已上传\"+_vm._s(_vm.imgPage.total)+\"张图片\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){_vm.showPicDialog = true}}},[_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconicon_btn_tjsh\"}})]),_vm._v(\"\\n        上传图片\\n      \")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"content-card\"},_vm._l((_vm.imgData),function(img){return _c('el-card',{key:img.id,attrs:{\"body-style\":{ padding: '0px' },\"shadow\":\"hover\"}},[_c('img',{staticClass:\"image\",class:{'collection': _vm.activeSelect == '1'},attrs:{\"src\":img.url}}),_vm._v(\" \"),(_vm.activeSelect == '0')?_c('div',{staticClass:\"operate\"},[_c('div',{staticClass:\"item\",on:{\"click\":function($event){return _vm.collectOrCancel(img)}}},[_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":img.isCollection ? '#iconbtn_collect_sel' : '#iconbtn_collect'}})]),_vm._v(\"\\n          \"+_vm._s(img.isCollection ? '已收藏' : '收藏')+\"\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"item\",on:{\"click\":function($event){return _vm.delImg(img)}}},[_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconbtn_del\"}})]),_vm._v(\"删除\\n        \")])]):_vm._e()])}),1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.imgPage.total,\"page-count\":_vm.imgPage.pageCount,\"page-size\":_vm.imgPage.pageSize,\"current-page\":_vm.imgPage.currentPage},on:{\"current-change\":_vm.pageChange,\"size-change\":_vm.sizeChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"width\":\"849px\",\"center\":\"\",\"visible\":_vm.showPicDialog,\"show-close\":false,\"before-close\":_vm.closeModal},on:{\"update:visible\":function($event){_vm.showPicDialog=$event}}},[(_vm.showPicDialog)?_c('upload',{attrs:{\"imgChange\":_vm.imgChangeCall}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1a608da6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/material/material.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1a608da6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./material.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./material.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./material.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a608da6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./material.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1a608da6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/material/material.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <el-upload\n      class=\"uploader\"\n      action\n      :show-file-list=\"true\"\n      :auto-upload=\"false\"\n      :on-change=\"handleOnChange\">\n      <svg v-if=\"!upload_img_url\" class=\"icon svg-icon\" aria-hidden=\"true\">\n        <use xlink:href=\"#icon_btn_addpic\" />\n      </svg>\n      <span v-if=\"!upload_img_url\">选择图片</span>\n      <img v-if=\"upload_img_url\" :src=\"upload_img_url\" class=\"avatar\">\n    </el-upload>\n    <el-button type=\"success\" @click=\"fnUpload\" style=\"margin-top: 30px;\">\n      <svg class=\"icon svg-icon\" aria-hidden=\"true\">\n        <use xlink:href=\"#iconicon_btn_tjsh\" />\n      </svg>\n      开始上传\n    </el-button>\n  </div>\n</template>\n\n<script>\nimport { uploadImg } from '@/api/publish'\n\nexport default {\n  name: 'upload',\n  props: ['imgChange'],\n  data () {\n    return {\n      upload_img_url: '',\n      file: [],\n      dialogVisible: false\n    }\n  },\n  methods: {\n    handleOnChange (file, fileList) {\n      this.file = file\n    },\n    // 上传图片\n    async fnUpload () {\n      const file = this.file.raw\n      const fd = new FormData()\n      fd.append('multipartFile', file, file.name)\n\n      const result = await uploadImg(fd)\n      if (result.code === 200) {\n        this.$message({ message: '上传成功', type: 'success' }) && (this.upload_img_url = result.data.url)\n        this.imgChange && this.imgChange(result.data.url) // 调用上层的方法 通知数据变化\n      } else {\n        this.$message({ message: result.error_message, type: 'error' })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '@/scss/element-variables.scss';\n\n.el-dialog--center .el-dialog__body {\n  padding: 40px 49px 19px 49px;\n}\n\n.uploader {\n  text-align: left;\n\n  .el-upload {\n    position: relative;\n    width: 225px;\n    height: 150px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border: 2px dashed $--border-color-base;\n    color: $--color-text-primary;\n\n    .icon {\n      width: 40px;\n      height: 40px;\n    }\n\n    .avatar {\n      width: 225px;\n      height: 150px;\n      object-fit: cover;\n    }\n  }\n\n  .el-upload:hover {\n    color: $--color-primary;\n  }\n\n  .el-upload-list__item {\n    height: 40px;\n    line-height: 40px;\n  }\n\n  .el-upload-list__item:hover {\n    background-color: #F0F0F0;\n  }\n\n  .el-upload-list__item-name {\n    margin-left: 14px;\n    color: $--color-text-secondary;\n  }\n\n  .el-upload-list__item:first-child {\n    margin-top: 20px;\n  }\n\n  .el-upload-list__item .el-icon-close {\n    top: 13px;\n    right: 13px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Upload/upload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{staticClass:\"uploader\",attrs:{\"action\":\"\",\"show-file-list\":true,\"auto-upload\":false,\"on-change\":_vm.handleOnChange}},[(!_vm.upload_img_url)?_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon_btn_addpic\"}})]):_vm._e(),_vm._v(\" \"),(!_vm.upload_img_url)?_c('span',[_vm._v(\"选择图片\")]):_vm._e(),_vm._v(\" \"),(_vm.upload_img_url)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.upload_img_url}}):_vm._e()]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"type\":\"success\"},on:{\"click\":_vm.fnUpload}},[_c('svg',{staticClass:\"icon svg-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#iconicon_btn_tjsh\"}})]),_vm._v(\"\\n    开始上传\\n  \")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dd25d08a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Upload/upload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dd25d08a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./upload.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dd25d08a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Upload/upload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}